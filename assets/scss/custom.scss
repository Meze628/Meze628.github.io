/* 核弹级修复：强制修正左下角图标显示 */
/* 使用通用匹配，不再依赖 html 标签，同时匹配 class 和 DOM 顺序 */

/* 1. 默认/白天模式 (Light Mode) */
/* 逻辑：当 data-scheme 不是 dark 时 */
:root:not([data-scheme="dark"]) #dark-mode-toggle {
    /* 强制显示第1个图标 (toggle-left/太阳) */
    svg:nth-of-type(1), .icon-tabler-toggle-left {
        display: inline-block !important;
    }
    /* 强制隐藏第2个图标 (toggle-right/月亮) */
    svg:nth-of-type(2), .icon-tabler-toggle-right {
        display: none !important;
    }
}

/* 2. 黑夜模式 (Dark Mode) */
/* 逻辑：当 data-scheme 是 dark 时 */
:root[data-scheme="dark"] #dark-mode-toggle {
    /* 强制隐藏第1个图标 (toggle-left/太阳) */
    svg:nth-of-type(1), .icon-tabler-toggle-left {
        display: none !important;
    }
    /* 强制显示第2个图标 (toggle-right/月亮) */
    svg:nth-of-type(2), .icon-tabler-toggle-right {
        display: inline-block !important;
    }
}

/* --- 优化代码块：Dracula 风格 & 禁止选中行号 --- */

/* 针对 Hugo 生成的代码块表格 */
.article-content .highlight > div.chroma {
    /* 1. 圆角和阴影，让它看起来像 Mac 窗口 */
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    margin-bottom: 1.5rem;
    
    /* 确保背景色填满圆角 */
    overflow: hidden; 
}

/* 针对代码表格本身 */
.chroma .lntable {
    border-collapse: collapse;
    width: 100%;
    display: block;
    overflow-x: auto; /* 允许横向滚动 */
}

/* --- 核心魔法：行号不可选中 --- */
.chroma .lntd:first-child {
    /* 1. 禁止鼠标选中 (核心) */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

    /* 2. 视觉优化：行号颜色淡一点，不抢戏 */
    color: rgba(255, 255, 255, 0.4) !important; 
    
    /* 3. 分割线：在行号右边加一条淡淡的竖线 */
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    
    /* 4. 间距调整 */
    padding-right: 10px !important;
    margin-right: 10px !important;
    text-align: right;
    width: 1%; /* 紧缩宽度 */
    vertical-align: top; /* 顶部对齐 */
}

/* 代码内容区域 */
.chroma .lntd:last-child {
    padding-left: 15px !important;
    vertical-align: top;
    width: 100%;
}