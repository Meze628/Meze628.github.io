/* ==========================================================================
   最终方案：关闭行号版 (macOS Header + Dracula + 完美滚动)
   ========================================================================== */

/* 1. 修复左下角切换图标 (保持不动) */
:root:not([data-scheme="dark"]) #dark-mode-toggle {
    svg:nth-of-type(1), .icon-tabler-toggle-left { display: inline-block !important; }
    svg:nth-of-type(2), .icon-tabler-toggle-right { display: none !important; }
}
:root[data-scheme="dark"] #dark-mode-toggle {
    svg:nth-of-type(1), .icon-tabler-toggle-left { display: none !important; }
    svg:nth-of-type(2), .icon-tabler-toggle-right { display: inline-block !important; }
}

/* 2. 代码块外层容器 */
.article-content .highlight {
    /* 固定使用深色背景色 (Dracula 的背景色 #282a36) */
    background-color: #282a36 !important;
    
    /* 强制让未被高亮插件捕获的普通纯文本也显示为浅色 */
    color: #f8f8f2 !important;
    
    /* 容器样式 */
    border-radius: 12px;
    box-shadow: var(--shadow-l1) !important;
    margin: 20px auto !important;
    width: 96% !important;
    
    /* 关键：为顶部的红绿灯留出 32px 的空间 */
    padding-top: 32px !important;
    position: relative;
    overflow: hidden; /* 防止圆角溢出 */
}

/* 3. macOS 红绿灯头部 (绝对定位) */
.article-content .highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 32px;
    
    /* 图标与底部分割线 */
    background: url(/code-header.svg) no-repeat 12px 10px;
    background-size: 46px;
    background-color: inherit; /* 跟随父元素背景 */
    
    /* 将原本的 var(--body-background) 改为半透明白色，防止亮色模式下出现突兀的浅色底边框 */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 10;
}

/* 4. 代码滚动区域 (PRE 标签) */
.article-content .highlight pre {
    /* 核心：再次强制背景透明，确保万无一失 */
    background-color: transparent !important;
    background: transparent !important;
    
    /* 核心：开启滚动条 */
    overflow-x: auto !important;
    
    margin: 0 !important;
    padding: 15px 15px !important;
    
    /* 字体与排版 */
    font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
    line-height: 1.5;
}

/* 5. 滚动条美化 */
.article-content .highlight pre::-webkit-scrollbar {
    height: 8px;
}
.article-content .highlight pre::-webkit-scrollbar-thumb {
    background-color: rgba(136, 136, 136, 0.3);
    border-radius: 4px;
}
.article-content .highlight pre::-webkit-scrollbar-thumb:hover {
    background-color: rgba(136, 136, 136, 0.6);
}