/* 核弹级修复：强制修正左下角图标显示 */
/* 使用通用匹配，不再依赖 html 标签，同时匹配 class 和 DOM 顺序 */

/* 1. 默认/白天模式 (Light Mode) */
/* 逻辑：当 data-scheme 不是 dark 时 */
:root:not([data-scheme="dark"]) #dark-mode-toggle {
    /* 强制显示第1个图标 (toggle-left/太阳) */
    svg:nth-of-type(1), .icon-tabler-toggle-left {
        display: inline-block !important;
    }
    /* 强制隐藏第2个图标 (toggle-right/月亮) */
    svg:nth-of-type(2), .icon-tabler-toggle-right {
        display: none !important;
    }
}

/* 2. 黑夜模式 (Dark Mode) */
/* 逻辑：当 data-scheme 是 dark 时 */
:root[data-scheme="dark"] #dark-mode-toggle {
    /* 强制隐藏第1个图标 (toggle-left/太阳) */
    svg:nth-of-type(1), .icon-tabler-toggle-left {
        display: none !important;
    }
    /* 强制显示第2个图标 (toggle-right/月亮) */
    svg:nth-of-type(2), .icon-tabler-toggle-right {
        display: inline-block !important;
    }
}

/* --- 1. 代码块基础样式美化 --- */
.highlight {
    background-color: var(--pre-background-color); /* 跟随主题背景色 */
    padding: var(--card-padding);
    position: relative;
    border-radius: 12px;
    box-shadow: var(--shadow-l1) !important;
    
    /* 【核心修改】收缩宽度并居中 */
    width: 96%;       /* 宽度设为 96%，这样左右就会留出空隙 */
    margin: 20px auto; /* 上下20px间距，左右自动居中 */
    
    /* 防止 padding 把盒子撑大 */
    box-sizing: border-box; 
}

/* --- 2. macOS 风格红绿灯头部 --- */
.article-content .highlight:before {
    content: '';
    display: block;
    /* 指向刚才创建的 svg 图片 */
    background: url(/code-header.svg);
    background-repeat: no-repeat;
    background-size: 46px; /* 调整圆点大小 */
    background-position: 12px 10px; /* 调整位置 */
    height: 32px; /* 头部高度 */
    width: 100%;
    border-bottom: 1px solid var(--body-background); /* 加一条底线更有质感 */
    margin-bottom: 10px;
}

/* --- 3. 细节调整 --- */
.article-content .highlight pre {
    margin: 0;
    padding: 0;
}

/* 针对行号表格的微调，防止错位 */
.chroma .lntable { 
    border-spacing: 0;
}
.chroma .lntd:first-child {
    padding-right: 15px; /* 行号和代码的间距 */
    user-select: none;   /* 依然保持行号不可选中 */
}